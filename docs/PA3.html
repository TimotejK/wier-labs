<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Programming assignment 3 | Web Information Extraction and Retrieval</title>
  <meta name="description" content="Instructions for the Web Information Extraction and Retrieval course labs" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Programming assignment 3 | Web Information Extraction and Retrieval" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Instructions for the Web Information Extraction and Retrieval course labs" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Programming assignment 3 | Web Information Extraction and Retrieval" />
  
  <meta name="twitter:description" content="Instructions for the Web Information Extraction and Retrieval course labs" />
  

<meta name="author" content="assist. prof. dr. Slavko Žitnik and prof. dr. Marko Bajec" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="PA2.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Web Information Extraction and Retrieval</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About the course</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lab-work"><i class="fa fa-check"></i>Lab work</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#programming-assignments"><i class="fa fa-check"></i>Programming assignments</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-projects-alternative-to-the-programming-assignments"><i class="fa fa-check"></i>Course projects (alternative to the programming assignments)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="PA1.html"><a href="PA1.html"><i class="fa fa-check"></i><b>1</b> Programming assignment 1</a>
<ul>
<li class="chapter" data-level="1.1" data-path="PA1.html"><a href="PA1.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="PA1.html"><a href="PA1.html#instructions"><i class="fa fa-check"></i><b>1.2</b> Instructions</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="PA1.html"><a href="PA1.html#crawldb-design"><i class="fa fa-check"></i><b>1.2.1</b> Crawldb design</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="PA1.html"><a href="PA1.html#basic-tools"><i class="fa fa-check"></i><b>1.3</b> Basic tools</a></li>
<li class="chapter" data-level="1.4" data-path="PA1.html"><a href="PA1.html#what-to-include-in-the-report"><i class="fa fa-check"></i><b>1.4</b> What to include in the report</a></li>
<li class="chapter" data-level="1.5" data-path="PA1.html"><a href="PA1.html#what-to-submit"><i class="fa fa-check"></i><b>1.5</b> What to submit</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="PA2.html"><a href="PA2.html"><i class="fa fa-check"></i><b>2</b> Programming assignment 2</a>
<ul>
<li class="chapter" data-level="2.1" data-path="PA2.html"><a href="PA2.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="PA2.html"><a href="PA2.html#instructions-1"><i class="fa fa-check"></i><b>2.2</b> Instructions</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="PA2.html"><a href="PA2.html#regular-expressions-implementation"><i class="fa fa-check"></i><b>2.2.1</b> Regular expressions implementation</a></li>
<li class="chapter" data-level="2.2.2" data-path="PA2.html"><a href="PA2.html#xpath-implementation"><i class="fa fa-check"></i><b>2.2.2</b> XPath implementation</a></li>
<li class="chapter" data-level="2.2.3" data-path="PA2.html"><a href="PA2.html#automatic-web-extraction-algorithm-implementation"><i class="fa fa-check"></i><b>2.2.3</b> Automatic Web extraction algorithm implementation</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="PA2.html"><a href="PA2.html#what-to-include-in-the-report-1"><i class="fa fa-check"></i><b>2.3</b> What to include in the report</a></li>
<li class="chapter" data-level="2.4" data-path="PA2.html"><a href="PA2.html#what-to-submit-1"><i class="fa fa-check"></i><b>2.4</b> What to submit</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="PA3.html"><a href="PA3.html"><i class="fa fa-check"></i><b>3</b> Programming assignment 3</a>
<ul>
<li class="chapter" data-level="3.1" data-path="PA3.html"><a href="PA3.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="PA3.html"><a href="PA3.html#instructions-2"><i class="fa fa-check"></i><b>3.2</b> Instructions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="PA3.html"><a href="PA3.html#data-processing-and-indexing"><i class="fa fa-check"></i><b>3.2.1</b> Data processing and indexing</a></li>
<li class="chapter" data-level="3.2.2" data-path="PA3.html"><a href="PA3.html#data-retrieval"><i class="fa fa-check"></i><b>3.2.2</b> Data retrieval</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="PA3.html"><a href="PA3.html#what-to-include-in-the-report-2"><i class="fa fa-check"></i><b>3.3</b> What to include in the report</a></li>
<li class="chapter" data-level="3.4" data-path="PA3.html"><a href="PA3.html#what-to-submit-2"><i class="fa fa-check"></i><b>3.4</b> What to submit</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://ucilnica.fri.uni-lj.si">Moodle classroom</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Information Extraction and Retrieval</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="PA3" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Programming assignment 3<a href="PA3.html#PA3" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="img/book/spider-01.png" /></p>
<div id="introduction-2" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction<a href="PA3.html#introduction-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the first assignment you created a Web crawler to download Web content from the Internet. Then in the second assignment, you learned how to extract specific content from Web pages or how to identify data blocks of interest. In this last assignment you will build a simple index and implement querying against it.</p>
</div>
<div id="instructions-2" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Instructions<a href="PA3.html#instructions-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="data/pa3/PA3-data.zip">A compressed file</a> contains 1416 crawled Web pages from four different domains. Your software will need to extract textual context from the provided HTML files, perform preprocessing and store data into index. After that the built index can be used for querying. Your implementation must consist of the following parts:</p>
<ol style="list-style-type: decimal">
<li>Data processing and indexing</li>
<li>Data retrieval</li>
</ol>
<div id="data-processing-and-indexing" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Data processing and indexing<a href="PA3.html#data-processing-and-indexing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Prior to indexing we need to retrieve textual data from web pages. To get whole textual data, you can call appropriate <em>text()</em> function from your favourite HTML parsing library. The text must be then preprocesed using tokenization (<em>see word_tokenize function within the <a href="https://www.nltk.org/api/nltk.tokenize.html">nltk.tokenize package</a></em>), stopword removal (<em>use <a href="data/pa3/stopwords.py">these stopwords or extend them</a></em>) and normalization into lowercase letters. If you apply additional preprocessing steps, document them in the report. <em>Note that the same preprocessing function needs to be applied to a given query by a user.</em></p>
<p>Instead of creating your own data structure for inverted index, you will simulate it using the SQLite database with the following schema:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="PA3.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> IndexWord (</span>
<span id="cb2-2"><a href="PA3.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  word TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span></span>
<span id="cb2-3"><a href="PA3.html#cb2-3" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb2-4"><a href="PA3.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="PA3.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> Posting (</span>
<span id="cb2-6"><a href="PA3.html#cb2-6" aria-hidden="true" tabindex="-1"></a>  word TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-7"><a href="PA3.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  documentName TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-8"><a href="PA3.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  frequency <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-9"><a href="PA3.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">indexes</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-10"><a href="PA3.html#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(word, documentName),</span>
<span id="cb2-11"><a href="PA3.html#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (word) <span class="kw">REFERENCES</span> IndexWord(word)</span>
<span id="cb2-12"><a href="PA3.html#cb2-12" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p>The table <em>IndexWord</em> must contain a list of all words that are indexed by your system. Related table <em>Posting</em> contains frequencies and offset indexes for a word in a specific document. Let’s say that a word <em>davek</em> appears three times at indexes 2, 34 and 894 in a document <em>evem.gov.si/evem.gov.si.4.html</em>. A record in a <em>Posting</em> table would look like the following: (‘davek’, ‘evem.gov.si/evem.gov.si.4.html’, 3, ‘2,34,894’).</p>
</div>
<div id="data-retrieval" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Data retrieval<a href="PA3.html#data-retrieval" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The data retrieval part of your software should use the index built in the part above and return search results for a given query.</p>
<p>For a multi-word query, the algorithm must merge the results by document and return results descending by the sum of frequencies. The search should just check for indexed words that exactly match words from a query.</p>
<p>The output of search results must contain also snippets around the indexed words (neighbourhood of three words wrapped with three dots) as in the following example (<em>/implementation-indexing/run-sqlite-search.py “Sistem SPOT”</em>):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="PA3.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Results</span> for a query: <span class="st">&quot;Sistem SPOT&quot;</span></span>
<span id="cb3-2"><a href="PA3.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="PA3.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Results</span> found in 4ms.</span>
<span id="cb3-4"><a href="PA3.html#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="PA3.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Frequencies</span> Document                                  Snippet</span>
<span id="cb3-6"><a href="PA3.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">-----------</span> <span class="at">-----------------------------------------</span> <span class="at">-----------------------------------------------------------</span></span>
<span id="cb3-7"><a href="PA3.html#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">4</span>           evem.gov.si/evem.gov.si.666.html          Sistem SPOT je eden boljši ... dosedanje delovanje SPOT ni zadovoljivo za ... je bila zaključena. Sistem ni deloval dobro ...</span>
<span id="cb3-8"><a href="PA3.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">1</span>           e-uprava.gov.si/e-uprava.gov.si.42.html   ... ministrstvo je nadgradilo sistem za učinkovitejšo uporabo.</span></code></pre></div>
<p>In the report include the results for the following queries:</p>
<ul>
<li>“predelovalne dejavnosti”</li>
<li>“trgovina”</li>
<li>“social services”</li>
<li>Define additional three queries consisting of 1-5 words that have at least one result.</li>
</ul>
<p>Searching using the SQLite database should be quite fast (in our toy scenario).</p>
<p>To get a feeling of a speed-up in search using an inverted index, implement searching without the SQLite database. Instead of using the database, your algorithm should sequentially open each file, process it and merge the results. The parsing and preprocessing part must be the same as in searching with the SQLite database. Use the same search queries with this naive approach and compare the query execution times to inverted index implementation <em>/implementation-indexing/run-basic-search.py SEARCH_PARAM</em>.</p>
<p>During the lab session we will present how to use SQLite database in Python for those who have not yet used it in practice:</p>
<ul>
<li>Jupyter notebook tutorial <a href="notebooks/SQLite%20database.zip">SQLite database</a> that introduces the basic usage of SQLite to start working on the assignment.</li>
</ul>
</div>
</div>
<div id="what-to-include-in-the-report-2" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> What to include in the report<a href="PA3.html#what-to-include-in-the-report-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The report should follow the <a href="https://fri.uni-lj.si/sl/napotki-za-pisanje-porocila">standard structure</a>.</p>
<p>In the report include the following:</p>
<ul>
<li>All the specifics and decisions you made based on the instructions above and the description of the implementation. Separately describe (A) data processing with indexing, (B) data retrieval with inverted index and (C) data retrieval without inverted index.
<ul>
<li>Instead of (B) you can alternatively use an existing search-engine/indexing tool. Some examples of such are <a href="https://solr.apache.org/">Apache Solr</a>, <a href="https://www.elastic.co/">Elasticsearch</a>, <a href="https://typesense.org/">typesense</a>, <a href="https://www.mongodb.com/docs/manual/text-search/">MongoDB Full Text Search</a>, <a href="https://lucene.apache.org/">Apache Lucene</a>, …</li>
</ul></li>
<li>Describe the database (number of indexed words, words and documents with the highest frequencies, …).</li>
<li>Describe and comment on the results of the test queries.</li>
</ul>
</div>
<div id="what-to-submit-2" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> What to submit<a href="PA3.html#what-to-submit-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Push your work into the same repository as you used for the first assignment. Structure of the repository must comply with the following structure:</p>
<ul>
<li>a file <em>/implementation-indexing/inverted-index.db</em> - SQLite database file, generated by your indexing part.</li>
<li>a file <em>/implementation-indexing/report-indexing.pdf</em> - PDF report.</li>
<li>a file <em>README.md</em> - Short description of the project and instructions to install, set up and run the indexing and data retrieval (keep instructions for previous assignments).</li>
<li>a folder <em>/implementation-indexing</em> - Implementation of the methods along with run-sqlite-search.py and run-basic-search.py. CAUTION: Use relative paths so that anyone can run your scripts. Also, all the dependencies and instructions to run this part must be clearly described in README.md.</li>
</ul>
<!--
## Grading schema

All the submissions will be manually graded by the assistant. Also plagiarism check will be run across all the submissions. Grading will begin after the last late submission day. The submission time will be selected as the last commit time in the repository. 

The maximum score of 100 will roughly consist of the following:

Points | Item
------ | ----
30 | Inverted database check
40 | Data retrieval and ranking (inverted index) results and implementation
20 | Data retrieval and ranking (sequential file reading) results and implementation
10 | Submission repository compliance


Selected groups will need to defend their work during the lab hours. If a group does not agree with their achieved score, it will be able to "negotiate"/defend their programming assignment submission.
-->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="PA2.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

</body>

</html>
